<!DOCTYPE html>
<html>
<head>
	<!-- UIkit CSS -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/uikit/3.0.0-beta.35/css/uikit.min.css" />
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

<!-- UIkit JS -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/uikit/3.0.0-beta.35/js/uikit.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/uikit/3.0.0-beta.35/js/uikit-icons.min.js"></script>
	<title>Optical Calculator</title>
</head>
<body style="width:100vw;min-height:100vh;background-color: lightgrey;overflow: auto">
	<h5> 0 8 18 30 44 57 66 77 89 97</h5>
	<br><br>
	<div style="width: 100vw;text-align: center;height:100vh;display: grid;" id="element">
		
	</div>

</body>

</html>

<style type="text/css">
	
	body{
		width: 100vw;
		height: 100vh;
		display: flex;
		flex-direction: column;
		align-items:  center;
	}
	#element{
		color: #000;
	}
	#element>div{
		background-color: red;
		/*margin: 10px;*/
		height: 7vh;
		width: 7vh;
		margin: auto;
		display: flex;
		flex-direction: column;
		justify-content: center;
		align-items: center;
		color: #fff;
	}
	#element>div>div{
		background-color: blue;
		width:7vh;
		height: 3.5vh;
		margin-bottom: 0px;

	}
	.channelLabel{
		color:#fff;
		margin-right: 10px;
	}
</style>


<script type="text/javascript">
	
// Triple <Row,Diagonal,Subscript>
	class Triple {
	constructor(row,diagonal,subscript){
		this.diagonal = diagonal
		this.row = row
		this.subscript = subscript
	}
	getInfo(){
		var a = []
		a.push(this.row)
		a.push(this.diagonal)
		a.push(this.subscript)
		return a
	}
	changeSubscipt(subscript){
		this.subscript = subscript
	}
	getSubscript(){
		return this.subscript
	}
}

// infoArr = [0,8,18,30,44,57,66,77,89,97]
infoArr = [0,2,3,4,6,7,8,9]
elements = {}
TripleHex = {}
// rows = [] //For Upper triangle
// negativeRows = [] // For Lower Tria
function printAnswer(answer){

	var prevN = 0;
	var differenceArr = []
	var cssString = ""
	for (var i=0;i<answer.length;i++){
		cssString = cssString + "auto "
	}
	$("#element").css('grid-template-columns',cssString);
	// To Assign The Subscripts
	for(var j=0;j<answer.length;j++){
		var temp1 = []
		// var rowTemp = {}
		for(var m=0;m<prevN+1;m++){
			temp1.push(0)
		}
		for(var i=prevN+1;i<answer.length;i++){
			var difference = parseInt(answer[i])-parseInt(answer[prevN]);
			temp1.push(difference)
			if (difference > 0 && elements.hasOwnProperty(difference)){
				var count = elements[difference]
				count = count + 1;
				elements[difference] = count;
			}else{
				elements[difference] = 1;
			}

			// if (difference > 0 && rowTemp.hasOwnProperty(difference)){
			// 	var count = rowTemp[difference]
			// 	count = count + 1;
			// 	rowTemp[difference] = count;
			// }else{
			// 	rowTemp[difference] = 1;
			// }

		}
		differenceArr.push(temp1)
		// rows.push(rowTemp);
		prevN++;
	}
	// console.log(elements);
	// For lower triangle elements from upper traigngle elements
	for (var i=0;i<differenceArr.length;i++){
		for (var j=i+1;j<differenceArr[0].length;j++){
			difference = -1 * differenceArr[i][j];
			if (difference < 0 && elements.hasOwnProperty(difference)){
				var count = elements[difference]
				count = count + 1;
				elements[difference] = count;
			}else{
				elements[difference] = 1;
			}
			
			differenceArr[j][i] = difference;
		}
	}
	// both the upper and lower traingle are formed adn the TripleHex is also formed
	for(var i=0;i<differenceArr.length;i++){
		var tempDia = 1;
		for (var j=i+1;j<differenceArr[0].length;j++){
			var count = elements[differenceArr[i][j]]
			if(count > 1){
				count--;
				if(TripleHex.hasOwnProperty(differenceArr[i][j])){
					var tripleObject = new Triple(i,tempDia,count)
					var tripleArr = TripleHex[differenceArr[i][j]]
					tripleArr.push(tripleObject)
					TripleHex[differenceArr[i][j]] = tripleArr;
				}else{
					var tripleObject = new Triple(i,tempDia,count)
					var tripleArr = []
					tripleArr.push(tripleObject)
					TripleHex[differenceArr[i][j]] = tripleArr;
				}
			}
			tempDia++;
		}
	}

	for (var key in TripleHex){
			var tripleArr = TripleHex[key]
			for(var i =0;i<tripleArr.length;i++){
				var count = 0;
				var outerObject = tripleArr[i]
				if (outerObject.diagonal > 1){
					for(var j=0;j<tripleArr.length;j++){
						
						if(i == j){
							
						}else{
							var innerObject = tripleArr[j]
							maxrow = infoArr.length - 1
							minrow = 0
							// if(innerObject.row <= outerObject.row+outerObject.diagonal-1){
							// 	count ++;
							// }
							if(outerObject.row+outerObject.diagonal-1 < maxrow){
								maxrow = outerObject.row+outerObject.diagonal-1;
							}
							if(minrow < outerObject.row - outerObject.diagonal+1){
								minrow = outerObject.row - outerObject.diagonal+1
							}

							if(innerObject.row >= minrow && innerObject.row <= maxrow){
								count++;
							
							}

						}
					}
					outerObject.subscript = outerObject.subscript - count;
				}
				
			}
		
	}

	//copying it to the lower Triangle
	for(var i=0;i<differenceArr.length;i++){
		var tempDia = 1;
		for (var j=i+1;j<differenceArr[0].length;j++){
			var actual = -1 * differenceArr[j][i];
			var sub = -1
			if(TripleHex.hasOwnProperty(actual)){
				var tripleArr = TripleHex[actual]

				for(var itr in tripleArr){

					if(tripleArr[itr].row == i && tripleArr[itr].diagonal == tempDia){
						sub = tripleArr[itr].subscript
						if(sub>0){
							if(TripleHex.hasOwnProperty(differenceArr[j][i])){
								var tripleObject = new Triple(j,tempDia,tripleArr[itr].subscript)
								var tripleArr1 = TripleHex[differenceArr[j][i]]
								tripleArr1.push(tripleObject)
								TripleHex[differenceArr[j][i]] = tripleArr1;
							}else{
								var tripleObject = new Triple(j,tempDia,tripleArr[itr].subscript)
								var tripleArr1 = []
								tripleArr1.push(tripleObject)
								TripleHex[differenceArr[j][i]] = tripleArr1;
							}
						}
						break
					}
				}
				
			}
			tempDia++;
		}
	}

	for(var i=0;i<differenceArr.length;i++){
		var tempDia = 1;
		var tempDia1 = i;
		for (var j=0;j<differenceArr[0].length;j++){
			if(TripleHex.hasOwnProperty(differenceArr[i][j])){
				count = -1;
				var tripleArr = TripleHex[differenceArr[i][j]]
				if(differenceArr[i][j] > 0){
					for(s in tripleArr){
						var tempObject = tripleArr[s]
						if(tempObject.row == i && tempObject.diagonal == tempDia){
							count = tempObject.subscript;
							break;
						}
					}
				}else{
					for(s in tripleArr){
						var tempObject = tripleArr[s]
						if(tempObject.row == i && tempObject.diagonal == tempDia1){
							count = tempObject.subscript;
							break;
						}
					}
				}
				
				if(count > 0){
					var string  = "<div>" + differenceArr[i][j] +"<div>"+count+"</div></div>"
					$("#element").append(string)	
				}else if (count<0 && differenceArr[i][j] > 0){
					var string  = "<div>" + differenceArr[i][j] +"<div style = 'background-color:green;'>"+count+"</div></div>"
					$("#element").append(string)
				}else{
					var string  = "<div>" + differenceArr[i][j] +"</div>"
					$("#element").append(string)
				}
				
			
			}else{
				var string  = "<div>" + differenceArr[i][j] +"</div>"
				$("#element").append(string)
			}
			if(j>i){
				tempDia++;
			}
				tempDia1--;
			
		}
	}
	console.log(TripleHex)
	// console.log(rows)
	// console.log(negativeRows)

}

$("document").ready(function(){
	printAnswer(infoArr)
})


</script>